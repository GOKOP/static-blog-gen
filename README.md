# static-blog-gen

A POSIX\* shell script that generates simple static blog from markdown files.
Features:

- standalone page for every post
- rolling blog page
- post index
- separately written main page
- if using git to keep track of the md files, the script reads dates (and edit dates) from commits

This isn't the final state of this script, but I don't plan any breaking changes.
If you like minimal websites and are a bit weird, this is probably a tool for you.
If you want to do some css styling that requires some specific alterations to the html which my script doesn't support,
you can submit an issue and I might do something about it.
If you want advanced javascript and/or server-side scripts on your website then you probably should look somewhere else.

\* - but only developed and tested in GNU userspace

## Why?

Why not?

## Dependencies

- POSIX compatible shell
- coreutils
- grep
- sed
- awk
- bc (apparently these four aren't coreutils, I was surprised)
- pandoc
- git (optional)

## Usage

### Without git

1. Create a directory called "posts-md"
2. Add posts there, filenames in the format `YYYY-MM-DD_whatever.md` or `YYY-MM-DD.md` \
	(the resulting html filename later is gonna be this except with `.html` instead of `.md`)\
	The first line of the file should contain a header with the title, like `# title of the post`.
3. From the main directory of this repo, run `./generate.sh`. The website will appear in a folder called "site".\
	In the example html all paths are relative so you can copy contents of this folder into any location of your website.

### With git

If you use git to keep track of the `.md` posts, this script takes advantage of that and reads git commit dates.
Because of that there's no need to specify the date in the filename, and the script will also get the last edit date for each post.

1. Create a directory called "posts-md" and initialize a git repo in it
	* Alternatively, you can have the entire script in a git repo as long as it has commits with your posts (in posts-md ofc)
2. Add and commit posts there, filenames can be anything as long as they end with `.md` and don't contain spaces. 
	The resulting html file will be the same name but with `.html` extension.
	The first line of the file should contain a header with the title, like `# title of the post`.
	IMPORTANT: Make sure that filenames will allow `ls` to display them in chronological order, either by keeping the dates or just numbering posts.
3. From the main directory of this repo, run `./generate.sh`. The website will appear in a folder called "site".\
	In the example html all paths are relative so you can copy contents of this folder into any location of your website.

## Customization

Contents of the html and css folders are meant to be changed, obviously.
For that you need to know how they are put together.

There are four types of pages generated by this script - a post, post index, rolling blog and website index.
Apart of the last one which obviously is gonna be "index.html", they all land in their own subfolders:
"posts" for posts, "index" for post index and "roll" for rolling blog pages.
The script generates one post page per post (duh), and one page of index or the rolling blog per year.
For the last two, each file is called after the year, `YYYY.html`.
The latest year is also symlinked to "index.html" in these folders.

HTML files are combined to form the pages as follows:

#### Post:
1. html/common/top-pre-css.html
2. html/post/css.html
3. html/common/top-post-css.html
4. html/post/top.html
5. \<post content\>
5. html/common/back-to-top.html
6. html/common/footer.html

#### Rolling blog:
1. html/common/top-pre-css.html
2. html/roll/css.html
3. html/common/top-post-css.html
4. html/roll/top.html
5. Repeated for every post in a given year:
	- html/roll/post-head.html
	- \<post content\>
	- html/common/back-to-top.html
6. html/common/footer.html

#### Post index:
1. html/common/top-pre-css.html
2. html/index/css.html
3. html/common/top-post-css.html
4. html/index/top.html
5. Post list (it's coded into the script)
6. html/common/footer.html

#### Website index:
1. html/common/top-pre-css.html
2. html/site-index/css.html
3. html/common/top-post-css.html
4. content generated from index.md
6. html/common/footer.html

The script uses html comments as placeholders for strings that are figured out by the script.
Because of that you can see some html comments in illegal places (like filepaths).

The css folder will be copied to the site folder as-is while generating the site.
